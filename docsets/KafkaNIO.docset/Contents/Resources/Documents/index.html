<!DOCTYPE html>
<html lang="en">
  <head>
    <title>KafkaNIO  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="KafkaNIO  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">KafkaNIO Docs</a> (39% documented)</p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">KafkaNIO Reference</a>
        <img id="carat" src="img/carat.png" />
        KafkaNIO  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BrokerConnection.html">BrokerConnection</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Consumer.html">Consumer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Consumer/Configuration.html">– Configuration</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Consumer/FetchConfiguration.html">– FetchConfiguration</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Record.html">Record</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Record/Header.html">– Header</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RecordBatch.html">RecordBatch</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:8KafkaNIO10ConsumerIDa">ConsumerID</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:8KafkaNIO14MessageHandlera">MessageHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:8KafkaNIO5Topica">Topic</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='kafkanio' class='heading'>KafkaNIO</h1>

<p><a href="https://www.apache.org/licenses/LICENSE-2.0.html"><img src="https://img.shields.io/badge/License-Apache%202.0-yellow.svg" alt="License"></a>
<a href="https://swift.org"><img src="https://img.shields.io/badge/Swift-5.3-brightgreen.svg?colorA=orange&colorB=4E4E4E" alt="Swift"></a>
<a href="https://github.com/tbartelmess/kafka-nio/actions?query=workflow%3Atest-on-linux"><img src="https://img.shields.io/github/workflow/status/tbartelmess/kafka-nio/test-on-linux" alt="Build Status"></a></p>

<p>KafkaNIO is a library to interact with <a href="https://kafka.apache.org">Apache Kafka</a> from the Swift Server ecosystem.</p>

<p>It&rsquo;s built on top of Swift-NIO and implements the Kafka binary protocol.</p>
<h2 id='project-state' class='heading'>Project state</h2>

<p>This project is still in a very early state and not ready for production use, or even to interact with production clusters.</p>
<h2 id='installation' class='heading'>Installation</h2>

<p>To install KafkaNIO, add the package as a dependency in your <a href="https://github.com/apple/swift-package-manager/blob/master/Documentation/PackageDescriptionV4.md#dependencies">Package.swift</a>.</p>
<pre class="highlight swift"><code><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/tbartelmess/kafka-nio.git"</span><span class="p">,</span> <span class="o">.</span><span class="nf">upToNextMinor</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="s">"0.0.1"</span><span class="p">))</span>
<span class="p">]</span>
</code></pre>
<h2 id='consumer-api' class='heading'>Consumer API</h2>

<p>The Consumer API allows fetching records from a Kafka broker. The main consumer API is <code>poll()</code>, which returns an <code>EventLoopFuture</code> that gets fulfilled when all brokers that hold partitions for the subscribed topics return.</p>
<h3 id='connecting-to-kafka' class='heading'>Connecting to Kafka</h3>

<p>To connect to a Kafka Cluster, at least one address for a broker is required, from this broker the rest of the cluster state will be discovered.
It is possible to provide a list of &ldquo;bootstrap servers&rdquo;, when a broker is not available the client will attempt to bootstrap using the next cluster in the list.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">NIO</span>
<span class="kd">import</span> <span class="kt">KafkaNIO</span>

<span class="c1">// Create a socket address of a Kafka Server</span>
<span class="k">let</span> <span class="nv">bootstrapServer</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">SocketAddress</span><span class="o">.</span><span class="nf">makeAddressResolvingHost</span><span class="p">(</span><span class="kt">String</span><span class="p">(</span><span class="s">"my-kafka-host"</span><span class="p">),</span> <span class="nv">port</span><span class="p">:</span> <span class="mi">9092</span><span class="p">)</span>

<span class="c1">// Create an EventLoopGroup for the consumer</span>
<span class="k">let</span> <span class="nv">eventLoopGroup</span> <span class="o">=</span> <span class="kt">MultiThreadedEventLoopGroup</span><span class="p">(</span><span class="nv">numberOfThreads</span><span class="p">:</span> <span class="kt">System</span><span class="o">.</span><span class="n">coreCount</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">consumer</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">Consumer</span><span class="o">.</span><span class="nf">connect</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">bootstrapServers</span><span class="p">:</span> <span class="p">[</span><span class="n">bootstrapServer</span><span class="p">],</span>
                                                         <span class="nv">subscribedTopics</span><span class="p">:</span> <span class="p">[</span><span class="s">"my-topic"</span><span class="p">],</span>
                                                         <span class="nv">groupID</span><span class="p">:</span> <span class="s">"my-group-id"</span><span class="p">,</span>
                                                         <span class="nv">sessionTimeout</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
                                                         <span class="nv">rebalanceTimeout</span><span class="p">:</span> <span class="mi">5000</span><span class="p">),</span>
                                                         <span class="nv">eventLoopGroup</span><span class="p">:</span> <span class="n">eventLoopGroup</span><span class="p">)</span><span class="o">.</span><span class="nf">wait</span><span class="p">()</span>
<span class="c1">// Call setup, this will bootstrap the cluster and set up the subscription</span>
<span class="k">try</span> <span class="n">consumer</span><span class="o">.</span><span class="nf">setup</span><span class="p">()</span><span class="o">.</span><span class="nf">wait</span><span class="p">()</span>

<span class="c1">// Poll for records</span>
<span class="k">try</span> <span class="n">consumer</span><span class="o">.</span><span class="nf">poll</span><span class="p">()</span><span class="o">.</span><span class="nf">wait</span><span class="p">()</span>
</code></pre>
<h2 id='supported-features' class='heading'>Supported Features</h2>

<table><thead>
<tr>
<th style="text-align: left">KIP</th>
<th style="text-align: left">Status</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><a href="https://cwiki.apache.org/confluence/display/KAFKA/KIP-394%3A+Require+member.id+for+initial+join+group+request">KIP-394: Require member.id for initial join group request</a></td>
<td style="text-align: left">Supported.</td>
</tr>
</tbody></table>
<h2 id='supported-kafka-versions' class='heading'>Supported Kafka Versions</h2>

<p>All Kafka versions starting at 0.8 are supported. Some features are not available on some version of Kafka.</p>

<p>The integration test suite runs tests on the following versions:</p>

<ul>
<li>0.10.2.2</li>
<li>0.11.0.3</li>
<li>1.1.1</li>
<li>2.4.0</li>
<li>2.5.0</li>
</ul>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2020 <a class="link" href="" target="_blank" rel="external">Thomas</a>. All rights reserved. (Last updated: 2020-10-04)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.5</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
